databaseChangeLog:
  - changeSet:
      id: "01-1"
      author: alesia.sharstniova@innowise.com
      changes:
        - sql:
            sql: |
              CREATE TABLE orders (
                id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
                user_id BIGINT NOT NULL,
                status VARCHAR(15) NOT NULL DEFAULT 'PROCESSING' 
                  CHECK (status IN ('PROCESSING', 'PAYMENT_FAILED', 'COMPLETED', 'CANCELLED')),
                creation_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
              )
  - changeSet:
      id: "01-2"
      author: alesia.sharstniova@innowise.com
      changes:
        - sql:
            sql: CREATE INDEX idx_orders_status ON orders(status)
  - changeSet:
      id: "01-3"
      author: alesia.sharstniova@innowise.com
      changes:
        - sql:
            sql: CREATE INDEX idx_orders_user_id ON orders(user_id)
  - changeSet:
      id: "01-4"
      author: alesia.sharstniova@innowise.com
      changes:
        - sql:
            sql: CREATE INDEX idx_orders_id_user_id ON orders(id, user_id)